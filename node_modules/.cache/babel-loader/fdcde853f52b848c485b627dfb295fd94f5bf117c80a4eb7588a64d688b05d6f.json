{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\dogan\\\\Desktop\\\\Kelimo-26092025\\\\src\\\\components\\\\GameScreen.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\nimport { Check, Undo2, XCircle } from 'lucide-react';\nimport GameOverScreen from './GameOverScreen';\nimport { Home } from 'lucide-react';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function GameScreen({\n  socket,\n  turnData,\n  board,\n  setBoard,\n  scores,\n  statusMessage,\n  showGameOver,\n  gameOverData,\n  gameEnded,\n  onGameOver,\n  rematchPending,\n  username,\n  profileImage,\n  opponentImage,\n  opponentUsername,\n  setRematchPending,\n  setCurrentScreen,\n  onRematch,\n  isReconnect\n}) {\n  _s();\n  console.log('[GameScreen] üí° isReconnect prop:', isReconnect);\n  const [selectedCell, setSelectedCell] = useState(null);\n  const [enteredLetter, setEnteredLetter] = useState('');\n  const [tempPosition, setTempPosition] = useState(null);\n  const [message, setMessage] = useState('');\n  useEffect(() => {\n    console.log('[GameScreen] isReconnect:', isReconnect);\n    if (isReconnect) {\n      setMessage('‚è™ Kaldƒ±ƒüƒ±n yerden devam ediyorsun.');\n      const timer = setTimeout(() => setMessage(''), 3000);\n      return () => clearTimeout(timer);\n    }\n  }, [isReconnect]);\n  const [turnInfo, setTurnInfo] = useState('');\n  const [timer, setTimer] = useState('');\n  const [remainingTime, setRemainingTime] = useState(0);\n  const [confirmDisabled, setConfirmDisabled] = useState(false);\n  const [lastOpponentUsername, setLastOpponentUsername] = useState('');\n  const timerRef = useRef(null);\n  const [isMyTurn, setIsMyTurn] = useState(false);\n  const [letterToPlace, setLetterToPlace] = useState(null);\n  const buttonsDisabled = !isMyTurn || letterToPlace !== null;\n  const [gameStartedBefore, setGameStartedBefore] = useState(false);\n  const [selectedLetter, setSelectedLetter] = useState(null);\n  // useState'leri component √ºst√ºne ekle\n  const [previewLetter, setPreviewLetter] = useState(null); // Basƒ±lan harf\n  const [previewPosition, setPreviewPosition] = useState({\n    x: 0,\n    y: 0\n  }); // Parmaƒüƒ±n ekran pozisyonu\n  const letterRefs = useRef([]); // T√ºm harf kutularƒ±nƒ± takip etmek i√ßin ref dizisi\n  const isMenuButtonDisabled = false;\n  console.log('[DEBUG] profileImage:', profileImage);\n  console.log('[DEBUG] opponentImage:', opponentImage);\n  console.log('[DEBUG] GameScreen a√ßƒ±ldƒ±');\n  console.log('[DEBUG] gameOverData:', gameOverData);\n  console.log('[DEBUG] lastOpponentUsername:', lastOpponentUsername);\n  const [activeGames, setActiveGames] = useState([]);\n  const [storedOpponentImage, setStoredOpponentImage] = useState(() => {\n    return localStorage.getItem('opponentAvatar') || '/default-avatar.png';\n  });\n  console.log('storedOpponentImage:', storedOpponentImage);\n  useEffect(() => {\n    var _activeGames$;\n    console.log('activeGames deƒüi≈üti, yeni avatar:', activeGames === null || activeGames === void 0 ? void 0 : (_activeGames$ = activeGames[0]) === null || _activeGames$ === void 0 ? void 0 : _activeGames$.opponentImage);\n    if (activeGames && activeGames.length > 0) {\n      const currentOpponentAvatar = activeGames[0].opponentImage;\n      if (currentOpponentAvatar && currentOpponentAvatar !== storedOpponentImage) {\n        setStoredOpponentImage(currentOpponentAvatar);\n        localStorage.setItem('opponentAvatar', currentOpponentAvatar);\n      }\n    }\n  }, [activeGames]);\n  const fullProfileImage = profileImage ? profileImage.startsWith('http') ? profileImage : window.location.origin + profileImage : '/default-avatar.png';\n  const fullOpponentImage = storedOpponentImage ? storedOpponentImage.startsWith('http') ? storedOpponentImage : window.location.origin + storedOpponentImage : '/default-avatar.png';\n  const startTimer = duration => {\n    if (timerRef.current) clearInterval(timerRef.current);\n    let timeLeft = duration;\n    const formatTime = ms => {\n      const totalSeconds = Math.floor(ms / 1000);\n      const hours = Math.floor(totalSeconds / 3600);\n      const minutes = Math.floor(totalSeconds % 3600 / 60);\n      const seconds = totalSeconds % 60;\n      if (totalSeconds <= 0) return '‚è∞ S√ºre doldu';\n\n      // Saatlik g√∂sterim (1 saatten fazla ise)\n      if (totalSeconds >= 3600) {\n        // √ñrneƒüin 5 saat 15 dakika varsa ‚Üí \"6 saat\" g√∂stermeliyiz\n        const roundedHour = Math.ceil(totalSeconds / 3600);\n        return `${roundedHour} saat`;\n      }\n\n      // 1 dakika ile 59 dakika arasƒ±\n      if (totalSeconds >= 60) {\n        return `${minutes} dakika`;\n      }\n\n      // Son dakika: Dakika:saniye formatƒ±\n      return `${minutes}:${seconds.toString().padStart(2, '0')}`;\n    };\n    // ƒ∞lk g√∂sterim\n    setTimer(formatTime(timeLeft));\n    timerRef.current = setInterval(() => {\n      timeLeft -= 1000;\n      setTimer(formatTime(timeLeft));\n      if (timeLeft <= 0) {\n        clearInterval(timerRef.current);\n        timerRef.current = null;\n        setTimer('‚è∞ S√ºre doldu');\n        setMessage('‚è∞ Hamle s√ºresi sona erdi.');\n        setTurnInfo('');\n      }\n    }, 1000);\n  };\n  const stopTimer = () => {\n    if (timerRef.current) {\n      clearInterval(timerRef.current);\n      timerRef.current = null;\n    }\n    setTimer(''); // ‚¨ÖÔ∏è DOM'a deƒüil, state'e yazƒ±yoruz\n  };\n  const handleCellClick = (row, col) => {\n    if (gameEnded) {\n      return;\n    }\n\n    // üõë Eƒüer sƒ±ra sende deƒüilse ve rakipten gelen harf de yoksa, tƒ±klama iptal\n    if (!isMyTurn && !letterToPlace) {\n      setMessage('≈ûu an hamle sƒ±rasƒ± sende deƒüil!');\n      return;\n    }\n    const cellValue = board[row][col];\n    if (cellValue !== '') {\n      setMessage('Bu h√ºcre dolu ve kalƒ±cƒ±, deƒüi≈ütiremezsin!');\n      return;\n    }\n    const clicked = {\n      row,\n      col\n    };\n    if (letterToPlace) {\n      const newBoard = board.map(r => [...r]);\n      newBoard[row][col] = letterToPlace;\n      setBoard(newBoard);\n      socket.send(JSON.stringify({\n        type: 'placeOpponentLetter',\n        row,\n        col\n      }));\n      setMessage(`Rakibin harfi \"${letterToPlace}\" konumuna yerle≈ütirildi.`);\n      setLetterToPlace(null);\n      setEnteredLetter('');\n      setTempPosition(null);\n      return;\n    }\n    // 1Ô∏è‚É£ √ñnce eski preview‚Äôi sil\n    const newBoard = board.map(r => [...r]);\n    if (tempPosition) {\n      newBoard[tempPosition.row][tempPosition.col] = '';\n    }\n    if (selectedLetter) {\n      setEnteredLetter(selectedLetter);\n      setTempPosition(clicked);\n      setSelectedCell(clicked);\n      newBoard[row][col] = selectedLetter; // yeni preview\n      setBoard(newBoard);\n      setMessage(`\"${selectedLetter}\" harfi se√ßilen kutuya yerle≈ütirildi.`);\n      return;\n    }\n    if (tempPosition && enteredLetter) {\n      if (tempPosition.row !== row || tempPosition.col !== col) {\n        setSelectedCell(clicked);\n        setTempPosition(clicked);\n        setMessage(`Harf (${enteredLetter}) yeni konuma ta≈üƒ±ndƒ±.`);\n        newBoard[row][col] = enteredLetter; // yeni preview\n        setBoard(newBoard);\n      }\n    } else {\n      setSelectedCell(clicked);\n      setEnteredLetter(board[row][col] || '');\n      setMessage('H√ºcre se√ßildi. Klavyeden harf girin.');\n    }\n  };\n  useEffect(() => {\n    if (opponentImage) {\n      setStoredOpponentImage(opponentImage);\n      localStorage.setItem('opponentAvatar', opponentImage);\n    }\n  }, [opponentImage]);\n\n  // üß† Klavye dinleyici\n  useEffect(() => {\n    const handleKeyDown = e => {\n      if (!selectedCell || letterToPlace || gameEnded) return;\n      const rawKey = e.key;\n      const letter = e.key.toLocaleUpperCase('tr-TR');\n      if (forbiddenLetters.includes(letter)) {\n        e.preventDefault();\n        setMessage(`\"${letter}\" harfi kullanƒ±lamaz.`);\n        return;\n      }\n      if (!/^[A-Z√áƒûƒ∞√ñ≈û√ú]$/.test(letter)) return;\n\n      // √ñnceki preview‚Äôi sil\n      if (tempPosition) {\n        const newBoard = board.map(r => [...r]);\n        const {\n          row: prevRow,\n          col: prevCol\n        } = tempPosition;\n        newBoard[prevRow][prevCol] = '';\n        setBoard(newBoard);\n      }\n      setEnteredLetter(letter);\n      setTempPosition({\n        row: selectedCell.row,\n        col: selectedCell.col\n      });\n      const newBoard = board.map(r => [...r]);\n      newBoard[selectedCell.row][selectedCell.col] = letter;\n      setBoard(newBoard);\n      setMessage(`\"${letter}\" harfi ge√ßici olarak se√ßilen kutuya yerle≈ütirildi.`);\n      if (e.key === 'Enter') {\n        e.preventDefault();\n        confirmOwnLetter(); // üëà Enter‚Äôa basƒ±ldƒ±ƒüƒ±nda harfi sunucuya g√∂nder\n      }\n    };\n    window.addEventListener('keydown', handleKeyDown);\n    return () => window.removeEventListener('keydown', handleKeyDown);\n  }, [selectedCell, tempPosition, enteredLetter, gameEnded, board, socket]);\n\n  // ‚¨áÔ∏è State'lerin altƒ±na ekle (√∂rn. const [message, setMessage] = useState(''); varsa onun altƒ±)\n  const updateTurnMessages = (yourTurn, letterToPlace) => {\n    console.log('[DEBUG] updateTurnMessages √ßaƒürƒ±ldƒ±:', {\n      yourTurn,\n      letterToPlace\n    });\n    if (yourTurn && letterToPlace) {\n      setMessage('Harfi klavyeden girip bo≈ü bir h√ºcreye yerle≈ütir.');\n      setTurnInfo('Rakipten gelen harfi yerle≈ütir.');\n    } else if (yourTurn && !letterToPlace) {\n      setMessage('');\n      setTurnInfo('Kendi harfini girip yerle≈ütir.');\n    } else if (!yourTurn && letterToPlace) {\n      setMessage(`Rakibin g√∂nderdiƒüi harf: \"${letterToPlace}\"`);\n      setTurnInfo('Bu harfi uygun kutuya yerle≈ütir.');\n    } else {\n      setMessage('');\n      setTurnInfo('Rakibin hamlesi bekleniyor...');\n    }\n  };\n  const handleCellDrop = (row, col, e) => {\n    e.preventDefault();\n    const letter = e.dataTransfer.getData('text/plain');\n    if (!letter || !isMyTurn) {\n      setMessage('Sƒ±ra sende deƒüil ya da ge√ßersiz harf.');\n      return;\n    }\n    if (letterToPlace) {\n      // Rakipten gelen harfi yerle≈ütiriyoruz\n      const newBoard = board.map(r => [...r]);\n      if (newBoard[row][col] !== '') {\n        setMessage('Bu kutu dolu!');\n        return;\n      }\n      newBoard[row][col] = letter;\n      setBoard(newBoard);\n      socket.send(JSON.stringify({\n        type: 'placeOpponentLetter',\n        row,\n        col\n      }));\n      setLetterToPlace(null);\n      setMessage(`Rakip harfi \"${letter}\" konumuna yerle≈ütirildi.`);\n      return;\n    } else {\n      // Kendi se√ßtiƒüimiz harf\n      const newBoard = board.map(r => [...r]);\n      if (newBoard[row][col] !== '') {\n        setMessage('Bu kutu dolu!');\n        return;\n      }\n      newBoard[row][col] = letter;\n      setBoard(newBoard);\n      setEnteredLetter(letter);\n      setTempPosition({\n        row,\n        col\n      });\n      setSelectedCell({\n        row,\n        col\n      });\n      setMessage(`\"${letter}\" harfi se√ßilen kutuya yerle≈ütirildi.`);\n    }\n  };\n  const handleLetterClick = letter => {\n    if (letterToPlace === null) {\n      setSelectedLetter(letter);\n    }\n  };\n\n  // üí¨ [YENƒ∞] ƒ∞lk render'da mesajlarƒ± √∂nceden g√∂ster\n  useEffect(() => {\n    if (!turnData) {\n      setMessage('Oyun ba≈ülƒ±yor...');\n      setTurnInfo('Rakibin hamlesi bekleniyor...');\n    }\n  }, []);\n  useEffect(() => {\n    if (isMyTurn && !letterToPlace && tempPosition && enteredLetter) {\n      setBoard(prev => {\n        const newBoard = prev.map(r => [...r]);\n        newBoard[tempPosition.row][tempPosition.col] = enteredLetter;\n        return newBoard;\n      });\n    }\n  }, [isMyTurn, letterToPlace, tempPosition, enteredLetter]);\n  useEffect(() => {\n    var _turnData$yourTurn, _turnData$letterToPla;\n    if (!turnData) return;\n    console.log('[CLIENT] turnData g√ºncellendi:', turnData);\n    const yourTurn = (_turnData$yourTurn = turnData.yourTurn) !== null && _turnData$yourTurn !== void 0 ? _turnData$yourTurn : false;\n    const letterToPlace = (_turnData$letterToPla = turnData.letterToPlace) !== null && _turnData$letterToPla !== void 0 ? _turnData$letterToPla : null;\n    setIsMyTurn(yourTurn);\n    setLetterToPlace(letterToPlace);\n    updateTurnMessages(yourTurn, letterToPlace);\n    stopTimer(); // √ñnceki s√ºreyi temizle\n\n    if (turnData.turnDuration) {\n      startTimer(turnData.turnDuration);\n    }\n    if (turnData.remainingTime) {\n      setRemainingTime(Math.floor(turnData.remainingTime / 1000)); // saniyeye √ßevir\n    }\n    return () => {\n      stopTimer(); // Component unmount edildiƒüinde de timer'ƒ± durdur\n    };\n  }, [turnData]);\n  useEffect(() => {\n    console.log(`[CLIENT] isMyTurn: ${isMyTurn}, letterToPlace: ${letterToPlace}`);\n    updateTurnMessages(isMyTurn, letterToPlace);\n  }, [isMyTurn, letterToPlace]);\n  useEffect(() => {\n    if (turnData) {\n      setSelectedCell(null);\n      setEnteredLetter('');\n      setTempPosition(null);\n    }\n  }, [turnData]);\n  useEffect(() => {\n    console.log('[DEBUG] useEffect [gameOverData] tetiklendi', gameOverData);\n    if (gameOverData !== null && gameOverData !== void 0 && gameOverData.opponentUsername) {\n      console.log('[DEBUG] opponentUsername y√ºklendi:', gameOverData.opponentUsername);\n      setLastOpponentUsername(gameOverData.opponentUsername);\n    } else {\n      console.log('[DEBUG] Rakip adƒ± yok, set edilmeyecek.');\n    }\n  }, [gameOverData]);\n  const forbiddenLetters = ['X', 'W', 'Q'];\n  const confirmOwnLetter = () => {\n    console.log('[DEBUG] confirmOwnLetter √ßalƒ±≈ütƒ±');\n    console.log('[DEBUG] turnData:', turnData);\n    console.log('[DEBUG] letterToPlace:', letterToPlace);\n    console.log('[DEBUG] enteredLetter:', enteredLetter);\n    console.log('[DEBUG] tempPosition:', tempPosition);\n    console.log('[DEBUG] selectedCell:', selectedCell);\n    if (!(turnData !== null && turnData !== void 0 && turnData.yourTurn) || letterToPlace !== null) {\n      setMessage('Sƒ±ra sende deƒüil ya da hala rakip harfini yerle≈ütirmedin.');\n      return;\n    }\n    if (!selectedCell || !enteredLetter || !tempPosition) {\n      setMessage('Harf giri≈üi eksik.');\n      return;\n    }\n    if (forbiddenLetters.includes(enteredLetter.toUpperCase())) {\n      setMessage(`\"${enteredLetter.toUpperCase()}\" harfi kullanƒ±lamaz.`);\n      return;\n    }\n    console.log('[DEBUG] Sunucuya harf g√∂nderiliyor...');\n    // üõë S√ºreyi durdur\n    stopTimer();\n\n    // üîß ≈ûU ≈ûEKƒ∞LDE G√ñNDER:\n    socket.send(JSON.stringify({\n      type: 'updateOwnLetterPlacement',\n      letter: enteredLetter,\n      row: tempPosition.row,\n      col: tempPosition.col\n    }));\n    socket.send(JSON.stringify({\n      type: 'placeOwnLetter'\n    }));\n    setMessage(`Harf yerle≈ütirildi: ${enteredLetter.toUpperCase()} (${tempPosition.row}, ${tempPosition.col})`);\n    setEnteredLetter('');\n    setTempPosition(null);\n    setSelectedCell(null);\n    setSelectedLetter(null);\n    updateTurnMessages(false, null);\n  };\n  console.log('[DEBUG] GameScreen render', {\n    gameEnded,\n    lastOpponentUsername,\n    gameOverData\n  });\n  const secondsLeft = parseInt(timer);\n  useEffect(() => {\n    if (!turnData && !gameStartedBefore) {\n      setMessage('üéØ ƒ∞lk harfler geliyor... Hazƒ±r ol!');\n      setGameStartedBefore(true);\n    }\n  }, [turnData, gameStartedBefore]);\n  useEffect(() => {\n    letterRefs.current = []; // Her render'da sƒ±fƒ±rlanmalƒ±\n  }, [/* harf havuzu deƒüi≈ütiƒüinde (genellikle sabit olduƒüu i√ßin bo≈ü bƒ±rakabilirsin) */]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 flex flex-col items-center bg-[#f2f1f7] px-2 pt-[120px] pb-8 w-full min-h-screen overflow-hidden sm:relative sm:overflow-auto sm:h-auto sm:min-h-screen\",\n      children: [previewLetter && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"fixed z-50 pointer-events-none\",\n        style: {\n          top: previewPosition.y - 90,\n          // ‚¨ÖÔ∏è -60 yerine -90 veya -100 yap\n          left: previewPosition.x - 30\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"min-w-[60px] px-4 h-16 rounded-xl bg-white border border-gray-300 shadow-xl flex items-center justify-center text-4xl font-extrabold text-gray-900 scale-110 transition transform duration-75 ease-out\",\n          children: previewLetter\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 473,\n          columnNumber: 5\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 466,\n        columnNumber: 3\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-full fixed top-0 left-0 z-50 px-4 py-2 sm:py-3 bg-white/90 backdrop-blur-md shadow-sm flex items-center justify-between border-b border-gray-200\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: fullProfileImage,\n            alt: \"Sen\",\n            className: \"w-8 h-8 rounded-full border border-indigo-400 object-cover\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 482,\n            columnNumber: 5\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-col text-left\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm sm:text-base font-semibold text-gray-600 text-center w-full\",\n              children: username || 'Sen'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 488,\n              columnNumber: 7\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm sm:text-base font-bold text-indigo-700\",\n              children: scores.myScore\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 489,\n              columnNumber: 7\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 487,\n            columnNumber: 5\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 481,\n          columnNumber: 3\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-2 justify-end\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-col text-right\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xs sm:text-sm font-medium text-gray-700 truncate\",\n              children: opponentUsername || 'Rakip'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 496,\n              columnNumber: 7\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm sm:text-base font-bold text-indigo-700\",\n              children: scores.opponentScore\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 497,\n              columnNumber: 7\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 495,\n            columnNumber: 5\n          }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n            src: fullOpponentImage,\n            alt: \"Rakip\",\n            className: \"w-8 h-8 rounded-full border border-gray-400 object-cover\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 499,\n            columnNumber: 5\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 494,\n          columnNumber: 3\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 480,\n        columnNumber: 1\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"fixed top-[56px] left-0 w-full z-40 px-4 py-2 sm:py-3 bg-white/90 backdrop-blur-md shadow-md border-b border-gray-200\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between w-full max-w-[720px] mx-auto\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-col items-start w-24 sm:w-28\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm sm:text-base font-semibold text-gray-600 text-center w-full\",\n              children: \"S\\xFCre\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 511,\n              columnNumber: 5\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `flex items-center justify-center text-lg font-bold rounded-xl shadow text-center w-24 sm:w-28 h-10 sm:h-12 border\n        ${timer.includes('saat') ? 'bg-green-100 text-green-700 border-green-200' : timer.includes('dakika') ? 'bg-yellow-100 text-yellow-700 border-yellow-200' : timer.includes(':') ? 'bg-red-100 text-red-600 border-red-200 animate-pulse' : 'bg-gray-200 text-gray-500 border-gray-300'}\n    `,\n              children: timer || '-'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 512,\n              columnNumber: 5\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 510,\n            columnNumber: 3\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-4xl sm:text-5xl font-display font-black text-indigo-600 tracking-tight leading-tight drop-shadow-sm\",\n            children: \"Kelimo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 528,\n            columnNumber: 3\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-col items-end w-24 sm:w-28\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm sm:text-base font-semibold text-gray-600 text-center w-full\",\n              children: \"Gelen Harf\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 534,\n              columnNumber: 5\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-center text-lg font-bold text-indigo-800 rounded-xl shadow text-center w-24 sm:w-28 h-10 sm:h-12 border bg-indigo-50 border-indigo-200\",\n              children: letterToPlace ? /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"leading-none\",\n                children: letterToPlace\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 537,\n                columnNumber: 9\n              }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-gray-400 text-xl\",\n                children: \"-\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 541,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 535,\n              columnNumber: 5\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 533,\n            columnNumber: 3\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 508,\n          columnNumber: 1\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 507,\n        columnNumber: 1\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-full text-center mt-4 sm:mt-10 mb-2 sm:mb-2 px-4 space-y-1 sm:space-y-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"min-h-[20px]\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: `text-sm text-gray-500 italic transition-opacity duration-300 ${message ? 'opacity-100' : 'opacity-0'}`,\n            children: message || '.'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 554,\n            columnNumber: 5\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 553,\n          columnNumber: 3\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"min-h-[28px]\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: `text-lg font-bold text-blue-700 transition-opacity duration-300 ${turnInfo ? 'opacity-100' : 'opacity-0'}`,\n            children: turnInfo || '.'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 561,\n            columnNumber: 5\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 560,\n          columnNumber: 3\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 550,\n        columnNumber: 1\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-[70vw] max-w-[340px] relative mx-auto\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"pt-[100%]\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 575,\n            columnNumber: 3\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"absolute inset-0 bg-gray-200 border-2 border-gray-600 rounded-lg p-1 sm:p-1.5 md:p-2\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `h-full w-full grid grid-cols-5 gap-[2.5%]`,\n              children: board.map((row, rowIndex) => row.map((cell, colIndex) => {\n                const isSelected = selectedCell && selectedCell.row === rowIndex && selectedCell.col === colIndex;\n                // ‚ë† Board'daki kalƒ±cƒ± harf veya preview\n                const displayLetter = cell || ((tempPosition === null || tempPosition === void 0 ? void 0 : tempPosition.row) === rowIndex && (tempPosition === null || tempPosition === void 0 ? void 0 : tempPosition.col) === colIndex ? enteredLetter : '');\n                return /*#__PURE__*/_jsxDEV(\"div\", {\n                  onClick: () => handleCellClick(rowIndex, colIndex),\n                  className: `\n  aspect-square\n  w-full\n  border border-gray-300 rounded-lg\n  flex items-center justify-center \n  font-bold text-base sm:text-lg md:text-xl\n  cursor-pointer transition-all duration-150\n  ${cell ? 'bg-yellow-200 text-gray-900' : 'bg-white text-gray-600'}\n  ${isSelected ? 'ring-2 ring-yellow-300' : ''}\n  hover:bg-yellow-100\n  overflow-hidden\n  leading-none\n  text-center\n`,\n                  children: displayLetter\n                }, `${rowIndex}-${colIndex}`, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 591,\n                  columnNumber: 13\n                }, this);\n              }))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 579,\n              columnNumber: 5\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 578,\n            columnNumber: 3\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 573,\n          columnNumber: 1\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-center space-x-2 sm:space-x-4 mt-3 sm:mt-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            title: \"Girdi\\u011Fin harfi onayla\",\n            onClick: confirmOwnLetter,\n            disabled: buttonsDisabled || !selectedCell || !enteredLetter || !tempPosition,\n            className: `flex flex-col items-center justify-center w-16 h-16 sm:w-20 sm:h-20 rounded-xl font-semibold text-white transition-all duration-150\n  ${buttonsDisabled || !selectedCell || !enteredLetter || !tempPosition ? 'bg-green-200 text-gray-400 cursor-not-allowed' : 'bg-green-400 hover:bg-green-500 active:scale-95 shadow-md active:shadow-inner cursor-pointer'}`,\n            children: [/*#__PURE__*/_jsxDEV(Check, {\n              className: \"w-5 h-5 sm:w-6 sm:h-6 mb-1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 639,\n              columnNumber: 5\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-xs font-semibold\",\n              children: \"Onayla\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 640,\n              columnNumber: 5\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 624,\n            columnNumber: 3\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            title: \"Girdi\\u011Fin harfi geri al\",\n            onClick: () => {\n              if (!tempPosition) {\n                setMessage('Geri alƒ±nacak hamle yok.');\n                return;\n              }\n              const newBoard = board.map(r => [...r]);\n              newBoard[tempPosition.row][tempPosition.col] = '';\n              setBoard(newBoard);\n              setEnteredLetter('');\n              setTempPosition(null);\n              setSelectedCell(null);\n              socket.send(JSON.stringify({\n                type: 'updateOwnLetterPlacement',\n                letter: '',\n                row: tempPosition.row,\n                col: tempPosition.col,\n                oldRow: tempPosition.row,\n                oldCol: tempPosition.col\n              }));\n              setMessage('Son harf geri alƒ±ndƒ±.');\n            },\n            disabled: buttonsDisabled || !tempPosition,\n            className: `flex flex-col items-center justify-center w-16 h-16 sm:w-20 sm:h-20 rounded-xl font-semibold transition-all duration-150\n\n    bg-yellow-300 hover:bg-yellow-400 active:scale-95 text-gray-800 shadow-md active:shadow-inner cursor-pointer\n    \n    disabled:opacity-50 disabled:cursor-not-allowed    \n    `,\n            children: [/*#__PURE__*/_jsxDEV(Undo2, {\n              className: \"w-5 h-5 sm:w-6 sm:h-6 mb-1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 677,\n              columnNumber: 3\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-xs font-semibold\",\n              children: \"Geri Al\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 678,\n              columnNumber: 3\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 642,\n            columnNumber: 3\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            title: \"Oyunu terk et\",\n            onClick: () => {\n              socket.send(JSON.stringify({\n                type: 'forfeit'\n              }));\n              setMessage('Oyundan √ßekildiniz.');\n            },\n            disabled: buttonsDisabled,\n            className: \"flex flex-col items-center justify-center w-16 h-16 sm:w-20 sm:h-20 bg-red-300 hover:bg-red-400 active:scale-95 text-gray-800 rounded-xl shadow-md active:shadow-inner transition-all duration-150\",\n            children: [/*#__PURE__*/_jsxDEV(XCircle, {\n              className: \"w-5 h-5 sm:w-6 sm:h-6 mb-1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 689,\n              columnNumber: 3\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-xs font-semibold\",\n              children: \"Pes Et\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 690,\n              columnNumber: 3\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 680,\n            columnNumber: 1\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            title: \"Ana men\\xFCye d\\xF6n\",\n            onClick: () => {\n              setCurrentScreen('start');\n              socket.send(JSON.stringify({\n                type: 'minimizeGame'\n              }));\n            },\n            disabled: false,\n            className: \"flex flex-col items-center justify-center w-16 h-16 sm:w-20 sm:h-20 bg-gray-400 hover:bg-gray-500 active:scale-95 text-white rounded-xl shadow-md active:shadow-inner transition-all duration-150\",\n            children: [/*#__PURE__*/_jsxDEV(Home, {\n              className: \"w-5 h-5 sm:w-6 sm:h-6 mb-1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 701,\n              columnNumber: 3\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-xs font-semibold\",\n              children: \"Ana Men\\xFC\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 702,\n              columnNumber: 3\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 692,\n            columnNumber: 1\n          }, this), showGameOver && gameOverData && /*#__PURE__*/_jsxDEV(GameOverScreen, {\n            data: gameOverData,\n            username: gameOverData.username,\n            playerScore: gameOverData.playerScore,\n            opponentScore: gameOverData.opponentScore,\n            playerDetails: gameOverData.playerDetails,\n            opponentDetails: gameOverData.opponentDetails,\n            playerBoardHTML: gameOverData.playerBoardHTML,\n            opponentBoardHTML: gameOverData.opponentBoardHTML,\n            onRematch: handleRematch,\n            rematchPending: rematchPending,\n            setRematchPending: setRematchPending,\n            socket: socket\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 708,\n            columnNumber: 3\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 622,\n          columnNumber: 1\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"block sm:hidden h-3\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 726,\n          columnNumber: 1\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 570,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"block sm:hidden w-full px-2 flex flex-col items-center space-y-1\",\n        children: [['Q', 'W', 'E', 'R', 'T', 'Y', 'U', 'I', 'O', 'P', 'ƒû', '√ú'], ['A', 'S', 'D', 'F', 'G', 'H', 'J', 'K', 'L', '≈û', 'ƒ∞'], ['Z', 'X', 'C', 'V', 'B', 'N', 'M', '√ñ', '√á']].map((row, rowIndex) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-center gap-[1px] sm:gap-[1px]\",\n          children: row.map((letter, i) => {\n            const isInactive = ['Q', 'W', 'X'].includes(letter);\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              ref: el => {\n                if (el) letterRefs.current.push(el);\n              } // ‚¨ÖÔ∏è Bu kutuyu refs listesine ekliyoruz\n              ,\n              \"data-letter\": letter // ‚¨ÖÔ∏è Bu kutunun hangi harf olduƒüunu belirtiyoruz\n              ,\n\n              onClick: () => {\n                if (!isInactive) handleLetterClick(letter);\n              },\n              onTouchStart: e => {\n                if (!isInactive) {\n                  const touch = e.touches[0];\n                  setPreviewLetter(letter); // Harfi g√∂ster\n                  setPreviewPosition({\n                    x: touch.clientX,\n                    y: touch.clientY\n                  }); // Parmaƒüƒ±n konumu\n                }\n              },\n              onTouchEnd: e => {\n                const touch = e.changedTouches[0]; // üü° Parmaƒüƒ±n bƒ±rakƒ±ldƒ±ƒüƒ± pozisyonu al\n                setPreviewLetter(null); // üü° √ñnizlemeyi kaldƒ±r\n\n                const hoveredLetter = letterRefs.current.find(el => {\n                  const rect = el.getBoundingClientRect();\n                  return touch.clientX >= rect.left && touch.clientX <= rect.right && touch.clientY >= rect.top && touch.clientY <= rect.bottom;\n                });\n                if (hoveredLetter) {\n                  const selected = hoveredLetter.getAttribute('data-letter');\n                  if (!['Q', 'W', 'X'].includes(selected)) {\n                    handleLetterClick(selected); // üü¢ Bƒ±rakƒ±ldƒ±ƒüƒ±nda o harfi ger√ßek se√ßim yap\n                    setSelectedLetter(selected); // üü¢ UI'da da g√∂ster\n                  }\n                }\n              },\n              onTouchMove: e => {\n                const touch = e.touches[0];\n                setPreviewPosition({\n                  x: touch.clientX,\n                  y: touch.clientY\n                }); // ‚¨ÖÔ∏è Parmaƒüƒ±n pozisyonunu g√ºncelle\n                // ‚¨áÔ∏è ≈ûu anki parmak konumunun altƒ±nda bir harf kutusu var mƒ± kontrol et\n                const hoveredLetter = letterRefs.current.find(el => {\n                  const rect = el.getBoundingClientRect();\n                  return touch.clientX >= rect.left && touch.clientX <= rect.right && touch.clientY >= rect.top && touch.clientY <= rect.bottom;\n                });\n\n                // ‚¨áÔ∏è Eƒüer farklƒ± bir harf altƒ±na geldiysek, √∂nizleme harfini g√ºncelle\n                if (hoveredLetter) {\n                  const newLetter = hoveredLetter.getAttribute('data-letter');\n                  if (newLetter !== previewLetter) {\n                    setPreviewLetter(newLetter);\n                  }\n                }\n              },\n              className: `\n              w-[7.7vw] h-[10vw] sm:w-[6vw] sm:h-[7.6vw] md:w-[4.4vw] md:h-[6.2vw]\n              flex items-center justify-center\n              font-bold text-sm sm:text-base md:text-lg\n              rounded-xl border transition-all duration-150 ease-in-out\n              ${isInactive ? 'bg-gray-200 text-gray-400 border-gray-300 cursor-not-allowed' : `bg-white text-indigo-900 border-indigo-300 shadow cursor-pointer\n                   ${selectedLetter === letter ? 'ring-2 ring-indigo-500 bg-indigo-100 scale-110 -translate-y-1' : ''}`}\n            `,\n              children: letter\n            }, `letter-${rowIndex}-${i}`, false, {\n              fileName: _jsxFileName,\n              lineNumber: 744,\n              columnNumber: 9\n            }, this);\n          })\n        }, `row-${rowIndex}`, false, {\n          fileName: _jsxFileName,\n          lineNumber: 739,\n          columnNumber: 5\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 732,\n        columnNumber: 1\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 463,\n      columnNumber: 1\n    }, this)\n  }, void 0, false);\n}\n_s(GameScreen, \"skGxdhO/BIhCnVq0XX2hwIBVkFY=\");\n_c = GameScreen;\nvar _c;\n$RefreshReg$(_c, \"GameScreen\");","map":{"version":3,"names":["React","useEffect","useRef","useState","Check","Undo2","XCircle","GameOverScreen","Home","jsxDEV","_jsxDEV","Fragment","_Fragment","GameScreen","socket","turnData","board","setBoard","scores","statusMessage","showGameOver","gameOverData","gameEnded","onGameOver","rematchPending","username","profileImage","opponentImage","opponentUsername","setRematchPending","setCurrentScreen","onRematch","isReconnect","_s","console","log","selectedCell","setSelectedCell","enteredLetter","setEnteredLetter","tempPosition","setTempPosition","message","setMessage","timer","setTimeout","clearTimeout","turnInfo","setTurnInfo","setTimer","remainingTime","setRemainingTime","confirmDisabled","setConfirmDisabled","lastOpponentUsername","setLastOpponentUsername","timerRef","isMyTurn","setIsMyTurn","letterToPlace","setLetterToPlace","buttonsDisabled","gameStartedBefore","setGameStartedBefore","selectedLetter","setSelectedLetter","previewLetter","setPreviewLetter","previewPosition","setPreviewPosition","x","y","letterRefs","isMenuButtonDisabled","activeGames","setActiveGames","storedOpponentImage","setStoredOpponentImage","localStorage","getItem","_activeGames$","length","currentOpponentAvatar","setItem","fullProfileImage","startsWith","window","location","origin","fullOpponentImage","startTimer","duration","current","clearInterval","timeLeft","formatTime","ms","totalSeconds","Math","floor","hours","minutes","seconds","roundedHour","ceil","toString","padStart","setInterval","stopTimer","handleCellClick","row","col","cellValue","clicked","newBoard","map","r","send","JSON","stringify","type","handleKeyDown","e","rawKey","key","letter","toLocaleUpperCase","forbiddenLetters","includes","preventDefault","test","prevRow","prevCol","confirmOwnLetter","addEventListener","removeEventListener","updateTurnMessages","yourTurn","handleCellDrop","dataTransfer","getData","handleLetterClick","prev","_turnData$yourTurn","_turnData$letterToPla","turnDuration","toUpperCase","secondsLeft","parseInt","children","className","style","top","left","fileName","_jsxFileName","lineNumber","columnNumber","src","alt","myScore","opponentScore","rowIndex","cell","colIndex","isSelected","displayLetter","onClick","title","disabled","oldRow","oldCol","data","playerScore","playerDetails","opponentDetails","playerBoardHTML","opponentBoardHTML","handleRematch","i","isInactive","ref","el","push","onTouchStart","touch","touches","clientX","clientY","onTouchEnd","changedTouches","hoveredLetter","find","rect","getBoundingClientRect","right","bottom","selected","getAttribute","onTouchMove","newLetter","_c","$RefreshReg$"],"sources":["C:/Users/dogan/Desktop/Kelimo-26092025/src/components/GameScreen.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState, } from 'react';\r\nimport { Check, Undo2, XCircle } from 'lucide-react';\r\nimport GameOverScreen from './GameOverScreen';\r\nimport { Home } from 'lucide-react';\r\n\r\nexport default function GameScreen({\r\n\r\n  socket,\r\n  turnData,\r\n  board,\r\n  setBoard,\r\n  scores,\r\n  statusMessage,\r\n  showGameOver,\r\n  gameOverData,\r\n  gameEnded,\r\n  onGameOver,\r\n  rematchPending,\r\n  username,\r\n  profileImage,\r\n  opponentImage,\r\n  opponentUsername,\r\n  setRematchPending,\r\n  setCurrentScreen,\r\n  onRematch,\r\n  isReconnect\r\n}) {\r\n  console.log('[GameScreen] üí° isReconnect prop:', isReconnect);\r\n\r\nconst [selectedCell, setSelectedCell] = useState(null);\r\nconst [enteredLetter, setEnteredLetter] = useState('');\r\nconst [tempPosition, setTempPosition] = useState(null);\r\nconst [message, setMessage] = useState('');\r\n\r\nuseEffect(() => {\r\n  console.log('[GameScreen] isReconnect:', isReconnect);\r\n    if (isReconnect) {\r\n      setMessage('‚è™ Kaldƒ±ƒüƒ±n yerden devam ediyorsun.');\r\n      const timer = setTimeout(() => setMessage(''), 3000);\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [isReconnect]);\r\n\r\nconst [turnInfo, setTurnInfo] = useState('');\r\nconst [timer, setTimer] = useState('');\r\nconst [remainingTime, setRemainingTime] = useState(0);\r\nconst [confirmDisabled, setConfirmDisabled] = useState(false);\r\nconst [lastOpponentUsername, setLastOpponentUsername] = useState('');\r\nconst timerRef = useRef(null);\r\nconst [isMyTurn, setIsMyTurn] = useState(false);\r\nconst [letterToPlace, setLetterToPlace] = useState(null);\r\nconst buttonsDisabled = !isMyTurn || letterToPlace !== null;\r\n\r\nconst [gameStartedBefore, setGameStartedBefore] = useState(false);\r\nconst [selectedLetter, setSelectedLetter] = useState(null);\r\n// useState'leri component √ºst√ºne ekle\r\nconst [previewLetter, setPreviewLetter] = useState(null);         // Basƒ±lan harf\r\nconst [previewPosition, setPreviewPosition] = useState({ x: 0, y: 0 }); // Parmaƒüƒ±n ekran pozisyonu\r\nconst letterRefs = useRef([]); // T√ºm harf kutularƒ±nƒ± takip etmek i√ßin ref dizisi\r\nconst isMenuButtonDisabled = false;\r\nconsole.log('[DEBUG] profileImage:', profileImage);\r\nconsole.log('[DEBUG] opponentImage:', opponentImage);\r\n\r\nconsole.log('[DEBUG] GameScreen a√ßƒ±ldƒ±');\r\nconsole.log('[DEBUG] gameOverData:', gameOverData);\r\nconsole.log('[DEBUG] lastOpponentUsername:', lastOpponentUsername);\r\nconst [activeGames, setActiveGames] = useState([]);\r\nconst [storedOpponentImage, setStoredOpponentImage] = useState(() => {\r\n    return localStorage.getItem('opponentAvatar') || '/default-avatar.png';\r\n  });\r\nconsole.log('storedOpponentImage:', storedOpponentImage);\r\nuseEffect(() => {\r\n  console.log('activeGames deƒüi≈üti, yeni avatar:', activeGames?.[0]?.opponentImage);\r\n    if (activeGames && activeGames.length > 0) {\r\n      const currentOpponentAvatar = activeGames[0].opponentImage;\r\n      if (currentOpponentAvatar && currentOpponentAvatar !== storedOpponentImage) {\r\n        setStoredOpponentImage(currentOpponentAvatar);\r\n        localStorage.setItem('opponentAvatar', currentOpponentAvatar);\r\n      }\r\n    }\r\n  }, [activeGames]);\r\n\r\nconst fullProfileImage = profileImage\r\n  ? (profileImage.startsWith('http') ? profileImage : window.location.origin + profileImage)\r\n  : '/default-avatar.png';\r\n\r\n  const fullOpponentImage = storedOpponentImage\r\n    ? (storedOpponentImage.startsWith('http') ? storedOpponentImage : window.location.origin + storedOpponentImage)\r\n    : '/default-avatar.png';\r\n\r\nconst startTimer = (duration) => {\r\n  if (timerRef.current) clearInterval(timerRef.current);\r\n\r\n  let timeLeft = duration;\r\n\r\n  const formatTime = (ms) => {\r\n    const totalSeconds = Math.floor(ms / 1000);\r\n    const hours = Math.floor(totalSeconds / 3600);\r\n    const minutes = Math.floor((totalSeconds % 3600) / 60);\r\n    const seconds = totalSeconds % 60;\r\n\r\n    if (totalSeconds <= 0) return '‚è∞ S√ºre doldu';\r\n    \r\n     // Saatlik g√∂sterim (1 saatten fazla ise)\r\n  if (totalSeconds >= 3600) {\r\n    // √ñrneƒüin 5 saat 15 dakika varsa ‚Üí \"6 saat\" g√∂stermeliyiz\r\n    const roundedHour = Math.ceil(totalSeconds / 3600);\r\n    return `${roundedHour} saat`;\r\n  }\r\n\r\n  // 1 dakika ile 59 dakika arasƒ±\r\n  if (totalSeconds >= 60) {\r\n    return `${minutes} dakika`;\r\n  }\r\n\r\n  // Son dakika: Dakika:saniye formatƒ±\r\n  return `${minutes}:${seconds.toString().padStart(2, '0')}`;\r\n};\r\n  // ƒ∞lk g√∂sterim\r\n  setTimer(formatTime(timeLeft));\r\n\r\n  timerRef.current = setInterval(() => {\r\n    timeLeft -= 1000;\r\n\r\n    setTimer(formatTime(timeLeft));\r\n\r\n    if (timeLeft <= 0) {\r\n      clearInterval(timerRef.current);\r\n      timerRef.current = null;\r\n      setTimer('‚è∞ S√ºre doldu');\r\n      setMessage('‚è∞ Hamle s√ºresi sona erdi.');\r\n      setTurnInfo('');\r\n    }\r\n  }, 1000);\r\n};\r\nconst stopTimer = () => {\r\n  if (timerRef.current) {\r\n    clearInterval(timerRef.current);\r\n    timerRef.current = null;\r\n  }\r\n\r\n  setTimer(''); // ‚¨ÖÔ∏è DOM'a deƒüil, state'e yazƒ±yoruz\r\n};\r\n\r\n\r\nconst handleCellClick = (row, col) => {\r\n    if (gameEnded) {\r\n  return;\r\n}\r\n\r\n// üõë Eƒüer sƒ±ra sende deƒüilse ve rakipten gelen harf de yoksa, tƒ±klama iptal\r\nif (!isMyTurn && !letterToPlace) {\r\n  setMessage('≈ûu an hamle sƒ±rasƒ± sende deƒüil!');\r\n  return;\r\n}\r\n\r\n    const cellValue = board[row][col];\r\n\r\n    if (cellValue !== '') {\r\n      setMessage('Bu h√ºcre dolu ve kalƒ±cƒ±, deƒüi≈ütiremezsin!');\r\n      return;\r\n    }\r\n\r\n    const clicked = { row, col };\r\n\r\n    if (letterToPlace) {\r\n    const newBoard = board.map(r => [...r]);\r\n    newBoard[row][col] = letterToPlace;\r\n    setBoard(newBoard);\r\n    socket.send(JSON.stringify({ type: 'placeOpponentLetter', row, col }));\r\n    setMessage(`Rakibin harfi \"${letterToPlace}\" konumuna yerle≈ütirildi.`);\r\n    setLetterToPlace(null);\r\n    setEnteredLetter('');\r\n    setTempPosition(null);\r\n    return;\r\n  }\r\n  // 1Ô∏è‚É£ √ñnce eski preview‚Äôi sil\r\n    const newBoard = board.map(r => [...r]);\r\n    if (tempPosition) {\r\n        newBoard[tempPosition.row][tempPosition.col] = '';\r\n    }\r\n\r\n  if (selectedLetter) {\r\n    setEnteredLetter(selectedLetter);\r\n    setTempPosition(clicked);\r\n    setSelectedCell(clicked);\r\n\r\n    newBoard[row][col] = selectedLetter; // yeni preview\r\n    setBoard(newBoard);\r\n\r\n    setMessage(`\"${selectedLetter}\" harfi se√ßilen kutuya yerle≈ütirildi.`);\r\n    return;\r\n  }\r\n\r\n    if (tempPosition && enteredLetter) {\r\n      if (tempPosition.row !== row || tempPosition.col !== col) {\r\n        setSelectedCell(clicked);\r\n        setTempPosition(clicked);\r\n        setMessage(`Harf (${enteredLetter}) yeni konuma ta≈üƒ±ndƒ±.`);\r\n\r\n\r\n        newBoard[row][col] = enteredLetter; // yeni preview\r\n        setBoard(newBoard);\r\n      }\r\n    } else {\r\n      setSelectedCell(clicked);\r\n      setEnteredLetter(board[row][col] || '');\r\n      setMessage('H√ºcre se√ßildi. Klavyeden harf girin.');\r\n    }\r\n};\r\n\r\nuseEffect(() => {\r\n    if (opponentImage) {\r\n      setStoredOpponentImage(opponentImage);\r\n      localStorage.setItem('opponentAvatar', opponentImage);\r\n    }\r\n  }, [opponentImage]);\r\n\r\n\r\n// üß† Klavye dinleyici\r\nuseEffect(() => {\r\n    const handleKeyDown = (e) => {\r\n      if (!selectedCell || letterToPlace || gameEnded) return;\r\n\r\n      const rawKey = e.key;\r\n      const letter = e.key.toLocaleUpperCase('tr-TR');\r\n      if (forbiddenLetters.includes(letter)) {\r\n      e.preventDefault();\r\n      setMessage(`\"${letter}\" harfi kullanƒ±lamaz.`);\r\n      return;\r\n    }\r\n      if (!/^[A-Z√áƒûƒ∞√ñ≈û√ú]$/.test(letter)) return;\r\n\r\n      // √ñnceki preview‚Äôi sil\r\n        if (tempPosition) {\r\n            const newBoard = board.map(r => [...r]);\r\n            const { row: prevRow, col: prevCol } = tempPosition;\r\n            newBoard[prevRow][prevCol] = '';\r\n            setBoard(newBoard);\r\n        }\r\n\r\n      setEnteredLetter(letter);\r\n      setTempPosition({ row: selectedCell.row, col: selectedCell.col });\r\n\r\n      const newBoard = board.map(r => [...r]);\r\n      newBoard[selectedCell.row][selectedCell.col] = letter;\r\n      setBoard(newBoard);\r\n\r\n      setMessage(`\"${letter}\" harfi ge√ßici olarak se√ßilen kutuya yerle≈ütirildi.`);\r\n\r\n      if (e.key === 'Enter') {\r\n  e.preventDefault();\r\n  confirmOwnLetter(); // üëà Enter‚Äôa basƒ±ldƒ±ƒüƒ±nda harfi sunucuya g√∂nder\r\n}\r\n\r\n    };\r\n    window.addEventListener('keydown', handleKeyDown);\r\n    return () => window.removeEventListener('keydown', handleKeyDown);\r\n}, [selectedCell, tempPosition, enteredLetter, gameEnded, board, socket]);\r\n\r\n// ‚¨áÔ∏è State'lerin altƒ±na ekle (√∂rn. const [message, setMessage] = useState(''); varsa onun altƒ±)\r\nconst updateTurnMessages = (yourTurn, letterToPlace) => {\r\n  console.log('[DEBUG] updateTurnMessages √ßaƒürƒ±ldƒ±:', { yourTurn, letterToPlace });\r\n  if (yourTurn && letterToPlace) {\r\n    setMessage('Harfi klavyeden girip bo≈ü bir h√ºcreye yerle≈ütir.');\r\n    setTurnInfo('Rakipten gelen harfi yerle≈ütir.');\r\n  } else if (yourTurn && !letterToPlace) {\r\n    setMessage('');\r\n    setTurnInfo('Kendi harfini girip yerle≈ütir.');\r\n  } else if (!yourTurn && letterToPlace) {\r\n    setMessage(`Rakibin g√∂nderdiƒüi harf: \"${letterToPlace}\"`);\r\n    setTurnInfo('Bu harfi uygun kutuya yerle≈ütir.');\r\n  } else {\r\n    setMessage('');\r\n    setTurnInfo('Rakibin hamlesi bekleniyor...');\r\n  }\r\n};\r\nconst handleCellDrop = (row, col, e) => {\r\n  e.preventDefault();\r\n  const letter = e.dataTransfer.getData('text/plain');\r\n\r\n  if (!letter || !isMyTurn) {\r\n    setMessage('Sƒ±ra sende deƒüil ya da ge√ßersiz harf.');\r\n    return;\r\n  }\r\n\r\n  if (letterToPlace) {\r\n    // Rakipten gelen harfi yerle≈ütiriyoruz\r\n    const newBoard = board.map(r => [...r]);\r\n    if (newBoard[row][col] !== '') {\r\n      setMessage('Bu kutu dolu!');\r\n      return;\r\n    }\r\n\r\n    newBoard[row][col] = letter;\r\n    setBoard(newBoard);\r\n\r\n    socket.send(JSON.stringify({ type: 'placeOpponentLetter', row, col }));\r\n    setLetterToPlace(null);\r\n    setMessage(`Rakip harfi \"${letter}\" konumuna yerle≈ütirildi.`);\r\n    return;\r\n  } else {\r\n    // Kendi se√ßtiƒüimiz harf\r\n    const newBoard = board.map(r => [...r]);\r\n    if (newBoard[row][col] !== '') {\r\n      setMessage('Bu kutu dolu!');\r\n      return;\r\n    }\r\n\r\n    newBoard[row][col] = letter;\r\n    setBoard(newBoard);\r\n    setEnteredLetter(letter);\r\n    setTempPosition({ row, col });\r\n    setSelectedCell({ row, col });\r\n    setMessage(`\"${letter}\" harfi se√ßilen kutuya yerle≈ütirildi.`);\r\n  }\r\n};\r\n\r\nconst handleLetterClick = (letter) => {\r\n  if (letterToPlace === null) {\r\n    setSelectedLetter(letter);\r\n  }\r\n};\r\n\r\n\r\n// üí¨ [YENƒ∞] ƒ∞lk render'da mesajlarƒ± √∂nceden g√∂ster\r\nuseEffect(() => {\r\n  if (!turnData) {\r\n    setMessage('Oyun ba≈ülƒ±yor...');\r\n    setTurnInfo('Rakibin hamlesi bekleniyor...');\r\n  }\r\n}, []);\r\n\r\nuseEffect(() => {\r\n\r\n  if (isMyTurn && !letterToPlace && tempPosition && enteredLetter) {\r\n    setBoard(prev => {\r\n      const newBoard = prev.map(r => [...r]);\r\n      newBoard[tempPosition.row][tempPosition.col] = enteredLetter;\r\n      return newBoard;\r\n    });\r\n  }\r\n}, [isMyTurn, letterToPlace, tempPosition, enteredLetter]);\r\n\r\nuseEffect(() => {\r\n  \r\nif (!turnData) return;\r\nconsole.log('[CLIENT] turnData g√ºncellendi:', turnData);\r\n\r\nconst yourTurn = turnData.yourTurn ?? false;\r\nconst letterToPlace = turnData.letterToPlace ?? null;\r\n\r\nsetIsMyTurn(yourTurn);\r\nsetLetterToPlace(letterToPlace);\r\n\r\nupdateTurnMessages(yourTurn, letterToPlace);\r\n\r\nstopTimer(); // √ñnceki s√ºreyi temizle\r\n\r\nif (turnData.turnDuration) {\r\n    startTimer(turnData.turnDuration);\r\n  }\r\n\r\nif (turnData.remainingTime) {\r\n    setRemainingTime(Math.floor(turnData.remainingTime / 1000)); // saniyeye √ßevir\r\n  }\r\n\r\nreturn () => {\r\n  stopTimer(); // Component unmount edildiƒüinde de timer'ƒ± durdur\r\n };\r\n}, [turnData]);\r\n\r\nuseEffect(() => {\r\n    console.log(`[CLIENT] isMyTurn: ${isMyTurn}, letterToPlace: ${letterToPlace}`);\r\n    updateTurnMessages(isMyTurn, letterToPlace);\r\n  }, [isMyTurn, letterToPlace]);\r\n\r\nuseEffect(() => {\r\n  if (turnData) {\r\n    setSelectedCell(null);\r\n    setEnteredLetter('');\r\n    setTempPosition(null);\r\n  }\r\n}, [turnData]);\r\n\r\nuseEffect(() => {\r\n  console.log('[DEBUG] useEffect [gameOverData] tetiklendi', gameOverData);\r\n  if (gameOverData?.opponentUsername) {\r\n    console.log('[DEBUG] opponentUsername y√ºklendi:', gameOverData.opponentUsername);\r\n    setLastOpponentUsername(gameOverData.opponentUsername);\r\n  } else {\r\n    console.log('[DEBUG] Rakip adƒ± yok, set edilmeyecek.');\r\n  }\r\n}, [gameOverData]);\r\n\r\nconst forbiddenLetters = ['X', 'W', 'Q'];\r\n\r\nconst confirmOwnLetter = () => {\r\n  console.log('[DEBUG] confirmOwnLetter √ßalƒ±≈ütƒ±');\r\n  console.log('[DEBUG] turnData:', turnData);\r\n  console.log('[DEBUG] letterToPlace:', letterToPlace);\r\n  console.log('[DEBUG] enteredLetter:', enteredLetter);\r\n  console.log('[DEBUG] tempPosition:', tempPosition);\r\n  console.log('[DEBUG] selectedCell:', selectedCell);\r\n  if (!turnData?.yourTurn || letterToPlace !== null) {\r\n    setMessage('Sƒ±ra sende deƒüil ya da hala rakip harfini yerle≈ütirmedin.');\r\n    return;\r\n  }\r\n\r\n  if (!selectedCell || !enteredLetter || !tempPosition) {\r\n    setMessage('Harf giri≈üi eksik.');\r\n    return;\r\n  }\r\n\r\n  if (forbiddenLetters.includes(enteredLetter.toUpperCase())) {\r\n    setMessage(`\"${enteredLetter.toUpperCase()}\" harfi kullanƒ±lamaz.`);\r\n    return;\r\n  }\r\n\r\nconsole.log('[DEBUG] Sunucuya harf g√∂nderiliyor...');\r\n  // üõë S√ºreyi durdur\r\n  stopTimer();\r\n\r\n  // üîß ≈ûU ≈ûEKƒ∞LDE G√ñNDER:\r\n  socket.send(JSON.stringify({\r\n    type: 'updateOwnLetterPlacement',\r\n    letter: enteredLetter,\r\n    row: tempPosition.row,\r\n    col: tempPosition.col\r\n  }));\r\n\r\n  socket.send(JSON.stringify({\r\n    type: 'placeOwnLetter', \r\n    }));\r\n\r\n  setMessage(`Harf yerle≈ütirildi: ${enteredLetter.toUpperCase()} (${tempPosition.row}, ${tempPosition.col})`);\r\n  setEnteredLetter('');\r\n  setTempPosition(null);\r\n  setSelectedCell(null);\r\n  setSelectedLetter(null);\r\n  updateTurnMessages(false, null);\r\n};\r\n\r\nconsole.log('[DEBUG] GameScreen render', {\r\n    gameEnded,\r\n    lastOpponentUsername,\r\n    gameOverData\r\n  });\r\nconst secondsLeft = parseInt(timer);\r\nuseEffect(() => {\r\n  if (!turnData && !gameStartedBefore) {\r\n    setMessage('üéØ ƒ∞lk harfler geliyor... Hazƒ±r ol!');\r\n    setGameStartedBefore(true);\r\n  }\r\n}, [turnData, gameStartedBefore]);\r\n\r\nuseEffect(() => {\r\n  letterRefs.current = []; // Her render'da sƒ±fƒ±rlanmalƒ±\r\n}, [/* harf havuzu deƒüi≈ütiƒüinde (genellikle sabit olduƒüu i√ßin bo≈ü bƒ±rakabilirsin) */]);\r\n\r\nreturn (\r\n<>\r\n<div className=\"fixed inset-0 flex flex-col items-center bg-[#f2f1f7] px-2 pt-[120px] pb-8 w-full min-h-screen overflow-hidden sm:relative sm:overflow-auto sm:h-auto sm:min-h-screen\">\r\n\r\n{previewLetter && (\r\n  <div\r\n    className=\"fixed z-50 pointer-events-none\"\r\n    style={{\r\n      top: previewPosition.y - 90, // ‚¨ÖÔ∏è -60 yerine -90 veya -100 yap\r\n  left: previewPosition.x - 30,\r\n    }}\r\n  >\r\n    <div className=\"min-w-[60px] px-4 h-16 rounded-xl bg-white border border-gray-300 shadow-xl flex items-center justify-center text-4xl font-extrabold text-gray-900 scale-110 transition transform duration-75 ease-out\">\r\n      {previewLetter}\r\n    </div>\r\n  </div>\r\n)}\r\n\r\n{/* √úst Bilgi Barƒ± */}\r\n<div className=\"w-full fixed top-0 left-0 z-50 px-4 py-2 sm:py-3 bg-white/90 backdrop-blur-md shadow-sm flex items-center justify-between border-b border-gray-200\">\r\n  <div className=\"flex items-center space-x-2\">\r\n    <img\r\n      src={fullProfileImage}\r\n      alt=\"Sen\"\r\n      className=\"w-8 h-8 rounded-full border border-indigo-400 object-cover\"\r\n    />\r\n    <div className=\"flex flex-col text-left\">\r\n      <p className=\"text-sm sm:text-base font-semibold text-gray-600 text-center w-full\">{username || 'Sen'}</p>\r\n      <p className=\"text-sm sm:text-base font-bold text-indigo-700\">{scores.myScore}</p>\r\n    </div>\r\n  </div>\r\n\r\n  {/* Rakip */}\r\n  <div className=\"flex items-center space-x-2 justify-end\">\r\n    <div className=\"flex flex-col text-right\">\r\n      <p className=\"text-xs sm:text-sm font-medium text-gray-700 truncate\">{opponentUsername || 'Rakip'}</p>\r\n      <p className=\"text-sm sm:text-base font-bold text-indigo-700\">{scores.opponentScore}</p>\r\n    </div>\r\n    <img\r\n      src={fullOpponentImage}\r\n      alt=\"Rakip\"\r\n      className=\"w-8 h-8 rounded-full border border-gray-400 object-cover\"\r\n    />\r\n  </div>\r\n</div>\r\n\r\n<div className=\"fixed top-[56px] left-0 w-full z-40 px-4 py-2 sm:py-3 bg-white/90 backdrop-blur-md shadow-md border-b border-gray-200\">\r\n<div className=\"flex items-center justify-between w-full max-w-[720px] mx-auto\">\r\n  {/* Sol: S√ºre kutusu */}\r\n  <div className=\"flex flex-col items-start w-24 sm:w-28\">\r\n    <p className=\"text-sm sm:text-base font-semibold text-gray-600 text-center w-full\">S√ºre</p>\r\n    <div\r\n      className={`flex items-center justify-center text-lg font-bold rounded-xl shadow text-center w-24 sm:w-28 h-10 sm:h-12 border\r\n        ${timer.includes('saat')\r\n        ? 'bg-green-100 text-green-700 border-green-200'\r\n        : timer.includes('dakika')\r\n        ? 'bg-yellow-100 text-yellow-700 border-yellow-200'\r\n        : timer.includes(':')\r\n        ? 'bg-red-100 text-red-600 border-red-200 animate-pulse'\r\n        : 'bg-gray-200 text-gray-500 border-gray-300'}\r\n    `}\r\n    >\r\n      {timer || '-'}\r\n    </div>\r\n  </div>\r\n\r\n  {/* Orta: Oyun adƒ± */}\r\n  <div className=\"text-4xl sm:text-5xl font-display font-black text-indigo-600 tracking-tight leading-tight drop-shadow-sm\">\r\n    Kelimo\r\n  </div>\r\n\r\n  {/* Saƒü: Gelen harf kutusu */}\r\n  <div className=\"flex flex-col items-end w-24 sm:w-28\">\r\n    <p className=\"text-sm sm:text-base font-semibold text-gray-600 text-center w-full\">Gelen Harf</p>\r\n    <div className=\"flex items-center justify-center text-lg font-bold text-indigo-800 rounded-xl shadow text-center w-24 sm:w-28 h-10 sm:h-12 border bg-indigo-50 border-indigo-200\">\r\n      {letterToPlace ? (\r\n        <span className=\"leading-none\">\r\n          {letterToPlace}\r\n          </span>\r\n      ) : (\r\n        <span className=\"text-gray-400 text-xl\">-</span>\r\n      )}\r\n    </div>\r\n  </div>\r\n</div>\r\n</div>\r\n\r\n    {/* Mesaj Alanƒ± */}\r\n{/* Mesaj Alanƒ± */}\r\n<div className=\"w-full text-center mt-4 sm:mt-10 mb-2 sm:mb-2 px-4 space-y-1 sm:space-y-2\">\r\n  \r\n  {/* Bilgilendirici Mesaj */}\r\n  <div className=\"min-h-[20px]\">\r\n    <p className={`text-sm text-gray-500 italic transition-opacity duration-300 ${message ? 'opacity-100' : 'opacity-0'}`}>\r\n      {message || '.'}\r\n    </p>\r\n  </div>\r\n\r\n  {/* Hamle Y√∂nlendirme Mesajƒ± */}\r\n  <div className=\"min-h-[28px]\">\r\n    <p className={`text-lg font-bold text-blue-700 transition-opacity duration-300 ${turnInfo ? 'opacity-100' : 'opacity-0'}`}>\r\n      {turnInfo || '.'}\r\n    </p>\r\n  </div>\r\n\r\n</div>\r\n\r\n\r\n    {/* Tahta Ba≈ülƒ±ƒüƒ± */}\r\n    <div className=\"text-center\">\r\n\r\n      {/* Oyun Tahtasƒ± */}\r\n<div className=\"w-[70vw] max-w-[340px] relative mx-auto\">\r\n  {/* Kare oran yaratƒ±cƒ± div */}\r\n  <div className=\"pt-[100%]\"></div>\r\n\r\n  {/* Dƒ±≈ü √ßer√ßeve - eski g√∂r√ºn√ºm */}\r\n  <div className=\"absolute inset-0 bg-gray-200 border-2 border-gray-600 rounded-lg p-1 sm:p-1.5 md:p-2\">\r\n    <div className={`h-full w-full grid grid-cols-5 gap-[2.5%]`}>\r\n      {board.map((row, rowIndex) =>\r\n        row.map((cell, colIndex) => {\r\n          const isSelected =\r\n            selectedCell &&\r\n            selectedCell.row === rowIndex &&\r\n            selectedCell.col === colIndex;\r\n// ‚ë† Board'daki kalƒ±cƒ± harf veya preview\r\n    const displayLetter =\r\n      cell || (tempPosition?.row === rowIndex && tempPosition?.col === colIndex ? enteredLetter : '');\r\n\r\n          return (\r\n            <div\r\n              key={`${rowIndex}-${colIndex}`}\r\n              onClick={() => handleCellClick(rowIndex, colIndex)}\r\n              className={`\r\n  aspect-square\r\n  w-full\r\n  border border-gray-300 rounded-lg\r\n  flex items-center justify-center \r\n  font-bold text-base sm:text-lg md:text-xl\r\n  cursor-pointer transition-all duration-150\r\n  ${cell ? 'bg-yellow-200 text-gray-900' : 'bg-white text-gray-600'}\r\n  ${isSelected ? 'ring-2 ring-yellow-300' : ''}\r\n  hover:bg-yellow-100\r\n  overflow-hidden\r\n  leading-none\r\n  text-center\r\n`}\r\n >\r\n              {displayLetter}\r\n            </div>\r\n          );\r\n        })\r\n      )}\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n\r\n\r\n{/* üëâ Onayla Butonu tam buraya geliyor */}\r\n\r\n<div className=\"flex justify-center space-x-2 sm:space-x-4 mt-3 sm:mt-6\">\r\n\r\n  <button\r\n    title=\"Girdiƒüin harfi onayla\"\r\n    onClick={confirmOwnLetter}\r\n    disabled={\r\n    buttonsDisabled ||\r\n  !selectedCell ||\r\n  !enteredLetter ||\r\n  !tempPosition\r\n  }\r\n    className={`flex flex-col items-center justify-center w-16 h-16 sm:w-20 sm:h-20 rounded-xl font-semibold text-white transition-all duration-150\r\n  ${buttonsDisabled || !selectedCell || !enteredLetter || !tempPosition\r\n    ? 'bg-green-200 text-gray-400 cursor-not-allowed'\r\n    : 'bg-green-400 hover:bg-green-500 active:scale-95 shadow-md active:shadow-inner cursor-pointer'\r\n  }`}\r\n  >\r\n    <Check className=\"w-5 h-5 sm:w-6 sm:h-6 mb-1\" />\r\n    <span className=\"text-xs font-semibold\">Onayla</span>\r\n  </button>\r\n  <button\r\n  title=\"Girdiƒüin harfi geri al\"\r\n  onClick={() => {\r\n    if (!tempPosition) {\r\n      setMessage('Geri alƒ±nacak hamle yok.');\r\n      return;\r\n    }\r\n\r\n    const newBoard = board.map(r => [...r]);\r\n    newBoard[tempPosition.row][tempPosition.col] = '';\r\n    setBoard(newBoard);\r\n\r\n    setEnteredLetter('');\r\n    setTempPosition(null);\r\n    setSelectedCell(null);\r\n\r\n    socket.send(JSON.stringify({\r\n      type: 'updateOwnLetterPlacement',\r\n      letter: '',\r\n      row: tempPosition.row,\r\n      col: tempPosition.col,\r\n      oldRow: tempPosition.row,\r\n      oldCol: tempPosition.col\r\n    }));\r\n\r\n    setMessage('Son harf geri alƒ±ndƒ±.');\r\n  }}\r\n  disabled={buttonsDisabled || !tempPosition}\r\n  className={`flex flex-col items-center justify-center w-16 h-16 sm:w-20 sm:h-20 rounded-xl font-semibold transition-all duration-150\r\n\r\n    bg-yellow-300 hover:bg-yellow-400 active:scale-95 text-gray-800 shadow-md active:shadow-inner cursor-pointer\r\n    \r\n    disabled:opacity-50 disabled:cursor-not-allowed    \r\n    `}\r\n>\r\n  <Undo2 className=\"w-5 h-5 sm:w-6 sm:h-6 mb-1\" />\r\n  <span className=\"text-xs font-semibold\">Geri Al</span>\r\n</button>\r\n<button\r\n  title=\"Oyunu terk et\"\r\n  onClick={() => {\r\n    socket.send(JSON.stringify({ type: 'forfeit' }));\r\n    setMessage('Oyundan √ßekildiniz.');\r\n  }}\r\n  disabled={buttonsDisabled}\r\n  className=\"flex flex-col items-center justify-center w-16 h-16 sm:w-20 sm:h-20 bg-red-300 hover:bg-red-400 active:scale-95 text-gray-800 rounded-xl shadow-md active:shadow-inner transition-all duration-150\"\r\n>\r\n  <XCircle className=\"w-5 h-5 sm:w-6 sm:h-6 mb-1\" />\r\n  <span className=\"text-xs font-semibold\">Pes Et</span>\r\n</button>\r\n<button\r\n  title=\"Ana men√ºye d√∂n\"\r\n  onClick={() => {\r\n    setCurrentScreen('start');\r\n    socket.send(JSON.stringify({ type: 'minimizeGame' }));\r\n  }}\r\n  disabled={false}\r\n  className=\"flex flex-col items-center justify-center w-16 h-16 sm:w-20 sm:h-20 bg-gray-400 hover:bg-gray-500 active:scale-95 text-white rounded-xl shadow-md active:shadow-inner transition-all duration-150\"\r\n>\r\n  <Home className=\"w-5 h-5 sm:w-6 sm:h-6 mb-1\" />\r\n  <span className=\"text-xs font-semibold\">Ana Men√º</span>\r\n</button>\r\n\r\n\r\n\r\n{showGameOver && gameOverData && (\r\n  <GameOverScreen\r\n    data={gameOverData}\r\n    username={gameOverData.username}\r\n    playerScore={gameOverData.playerScore}\r\n    opponentScore={gameOverData.opponentScore}\r\n    playerDetails={gameOverData.playerDetails}\r\n    opponentDetails={gameOverData.opponentDetails}\r\n    playerBoardHTML={gameOverData.playerBoardHTML}\r\n    opponentBoardHTML={gameOverData.opponentBoardHTML}\r\n    onRematch={handleRematch}\r\n    rematchPending={rematchPending}\r\n    setRematchPending={setRematchPending}\r\n    socket={socket}\r\n  />\r\n)}\r\n\r\n</div>\r\n{/* Mobilde klavye ile butonlar arasƒ±nda bo≈üluk bƒ±rakmak i√ßin g√∂r√ºnmez bo≈üluk */}\r\n<div className=\"block sm:hidden h-3\" />\r\n\r\n\r\n    </div>\r\n    \r\n{/* Harf Havuzu - Q Klavye 3 Satƒ±r */}\r\n<div className=\"block sm:hidden w-full px-2 flex flex-col items-center space-y-1\">\r\n {[\r\n    ['Q', 'W', 'E', 'R', 'T', 'Y', 'U', 'I', 'O', 'P', 'ƒû', '√ú'],\r\n    ['A', 'S', 'D', 'F', 'G', 'H', 'J', 'K', 'L', '≈û', 'ƒ∞'],\r\n    ['Z', 'X', 'C', 'V', 'B', 'N', 'M', '√ñ', '√á']\r\n  ].map((row, rowIndex) => (\r\n    \r\n    <div key={`row-${rowIndex}`}\r\n  className=\"flex justify-center gap-[1px] sm:gap-[1px]\">\r\n   {row.map((letter, i) => {\r\n    const isInactive = ['Q', 'W', 'X'].includes(letter);\r\n    return (\r\n        <div\r\n          key={`letter-${rowIndex}-${i}`}\r\n          ref={(el) => {\r\n  if (el) letterRefs.current.push(el);\r\n}}  // ‚¨ÖÔ∏è Bu kutuyu refs listesine ekliyoruz\r\n  data-letter={letter}                       // ‚¨ÖÔ∏è Bu kutunun hangi harf olduƒüunu belirtiyoruz\r\n\r\n\r\n          onClick={() => {\r\n              if (!isInactive) handleLetterClick(letter);\r\n            }}\r\n            onTouchStart={(e) => {\r\n    if (!isInactive) {\r\n      const touch = e.touches[0];\r\n      setPreviewLetter(letter);                                // Harfi g√∂ster\r\n      setPreviewPosition({ x: touch.clientX, y: touch.clientY }); // Parmaƒüƒ±n konumu\r\n    }\r\n  }}\r\n  onTouchEnd={(e) => {\r\n  const touch = e.changedTouches[0]; // üü° Parmaƒüƒ±n bƒ±rakƒ±ldƒ±ƒüƒ± pozisyonu al\r\n  setPreviewLetter(null); // üü° √ñnizlemeyi kaldƒ±r\r\n\r\n  const hoveredLetter = letterRefs.current.find(el => {\r\n    const rect = el.getBoundingClientRect();\r\n    return (\r\n      touch.clientX >= rect.left &&\r\n      touch.clientX <= rect.right &&\r\n      touch.clientY >= rect.top &&\r\n      touch.clientY <= rect.bottom\r\n    );\r\n  });\r\n\r\n  if (hoveredLetter) {\r\n    const selected = hoveredLetter.getAttribute('data-letter');\r\n    if (!['Q', 'W', 'X'].includes(selected)) {\r\n      handleLetterClick(selected); // üü¢ Bƒ±rakƒ±ldƒ±ƒüƒ±nda o harfi ger√ßek se√ßim yap\r\n      setSelectedLetter(selected); // üü¢ UI'da da g√∂ster\r\n    }\r\n  }\r\n}}\r\n  onTouchMove={(e) => {\r\n  const touch = e.touches[0];\r\n  setPreviewPosition({ x: touch.clientX, y: touch.clientY }); // ‚¨ÖÔ∏è Parmaƒüƒ±n pozisyonunu g√ºncelle\r\n// ‚¨áÔ∏è ≈ûu anki parmak konumunun altƒ±nda bir harf kutusu var mƒ± kontrol et\r\n  const hoveredLetter = letterRefs.current.find(el => {\r\n    const rect = el.getBoundingClientRect();\r\n    return (\r\n      touch.clientX >= rect.left &&\r\n      touch.clientX <= rect.right &&\r\n      touch.clientY >= rect.top &&\r\n      touch.clientY <= rect.bottom\r\n    );\r\n  });\r\n\r\n  // ‚¨áÔ∏è Eƒüer farklƒ± bir harf altƒ±na geldiysek, √∂nizleme harfini g√ºncelle\r\n  if (hoveredLetter) {\r\n    const newLetter = hoveredLetter.getAttribute('data-letter');\r\n    if (newLetter !== previewLetter) {\r\n      setPreviewLetter(newLetter);\r\n    }\r\n  }\r\n}}\r\n            className={`\r\n              w-[7.7vw] h-[10vw] sm:w-[6vw] sm:h-[7.6vw] md:w-[4.4vw] md:h-[6.2vw]\r\n              flex items-center justify-center\r\n              font-bold text-sm sm:text-base md:text-lg\r\n              rounded-xl border transition-all duration-150 ease-in-out\r\n              ${isInactive\r\n                ? 'bg-gray-200 text-gray-400 border-gray-300 cursor-not-allowed'\r\n                : `bg-white text-indigo-900 border-indigo-300 shadow cursor-pointer\r\n                   ${selectedLetter === letter ? 'ring-2 ring-indigo-500 bg-indigo-100 scale-110 -translate-y-1' : ''\r\n                   }`\r\n              }\r\n            `}\r\n          >\r\n            {letter}\r\n          </div>\r\n          );\r\n})}\r\n</div>\r\n))}\r\n</div>\r\n</div>\r\n</>\r\n);\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}